<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">rst-ca/dosbatch.ca.rst</tt>, line 1)</p>
<p>Malformed table.</p>
<pre class="literal-block">
+----------------------------------+----+----------------------------+
| Advanced Bash-Scripting Guide:   |
+==================================+====+============================+
| `Prev &lt;sample-bashrc.html&gt;`_     |    | `Next &lt;exercises.html&gt;`_   |
+----------------------------------+----+----------------------------+
</pre>
</div>
<hr class="docutils" />
<div class="section" id="appendix-m-converting-dos-batch-files-to-shell-scripts">
<h1>Appendix M. Converting DOS Batch Files to Shell Scripts</h1>
<p>Quite a number of programmers learned scripting on a PC running DOS.
Even the crippled DOS batch file language allowed writing some fairly
powerful scripts and applications, though they often required extensive
kludges and workarounds. Occasionally, the need still arises to convert
an old DOS batch file to a UNIX shell script. This is generally not
difficult, as DOS batch file operators are only a limited subset of the
equivalent shell scripting ones.</p>
<p><strong>Table M-1. Batch file keywords / variables / operators, and their
shell equivalents</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="29%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Batch File Operator</th>
<th class="head">Shell Script Equivalent</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal">%</tt></td>
<td>$</td>
<td>command-line parameter prefix</td>
</tr>
<tr><td><tt class="docutils literal">/</tt></td>
<td><ul class="first last simple">
<li></li>
</ul>
</td>
<td>command option flag</td>
</tr>
<tr><td><tt class="docutils literal">\</tt></td>
<td>/</td>
<td>directory path separator</td>
</tr>
<tr><td><tt class="docutils literal">==</tt></td>
<td>=</td>
<td>(equal-to) string comparison test</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">!==!</span></tt></td>
<td>!=</td>
<td>(not equal-to) string comparison test</td>
</tr>
<tr><td><tt class="docutils literal">|</tt></td>
<td>|</td>
<td>pipe</td>
</tr>
<tr><td><tt class="docutils literal">&#64;</tt></td>
<td>set <tt class="docutils literal">+v</tt></td>
<td>do not echo current command</td>
</tr>
<tr><td><tt class="docutils literal">*</tt></td>
<td>*</td>
<td>filename &quot;wild card&quot;</td>
</tr>
<tr><td><tt class="docutils literal">&gt;</tt></td>
<td>&gt;</td>
<td>file redirection (overwrite)</td>
</tr>
<tr><td><tt class="docutils literal">&gt;&gt;</tt></td>
<td>&gt;&gt;</td>
<td>file redirection (append)</td>
</tr>
<tr><td><tt class="docutils literal">&lt;</tt></td>
<td>&lt;</td>
<td>redirect <tt class="docutils literal">stdin</tt></td>
</tr>
<tr><td><tt class="docutils literal">%VAR%</tt></td>
<td>$VAR</td>
<td>environmental variable</td>
</tr>
<tr><td><tt class="docutils literal">REM</tt></td>
<td>#</td>
<td>comment</td>
</tr>
<tr><td><tt class="docutils literal">NOT</tt></td>
<td>!</td>
<td>negate following test</td>
</tr>
<tr><td><tt class="docutils literal">NUL</tt></td>
<td><tt class="docutils literal">/dev/null</tt></td>
<td>&quot;black hole&quot; for burying command output</td>
</tr>
<tr><td><tt class="docutils literal">ECHO</tt></td>
<td>echo</td>
<td>echo (many more option in Bash)</td>
</tr>
<tr><td><tt class="docutils literal">ECHO.</tt></td>
<td>echo</td>
<td>echo blank line</td>
</tr>
<tr><td><tt class="docutils literal">ECHO OFF</tt></td>
<td>set <tt class="docutils literal">+v</tt></td>
<td>do not echo command(s) following</td>
</tr>
<tr><td><tt class="docutils literal">FOR %%VAR IN (LIST) DO</tt></td>
<td>for var in [list]; do</td>
<td>&quot;for&quot; loop</td>
</tr>
<tr><td><tt class="docutils literal">:LABEL</tt></td>
<td>none (unnecessary)</td>
<td>label</td>
</tr>
<tr><td><tt class="docutils literal">GOTO</tt></td>
<td>none (use a function)</td>
<td>jump to another location in the script</td>
</tr>
<tr><td><tt class="docutils literal">PAUSE</tt></td>
<td>sleep</td>
<td>pause or wait an interval</td>
</tr>
<tr><td><tt class="docutils literal">CHOICE</tt></td>
<td>case or select</td>
<td>menu choice</td>
</tr>
<tr><td><tt class="docutils literal">IF</tt></td>
<td>if</td>
<td>if-test</td>
</tr>
<tr><td><tt class="docutils literal">IF EXIST FILENAME</tt></td>
<td>if [ -e filename ]</td>
<td>test if file exists</td>
</tr>
<tr><td><tt class="docutils literal">IF <span class="pre">!%N==!</span></tt></td>
<td>if [ -z &quot;$N&quot; ]</td>
<td>if replaceable parameter &quot;N&quot; not present</td>
</tr>
<tr><td><tt class="docutils literal">CALL</tt></td>
<td>source or . (dot operator)</td>
<td>&quot;include&quot; another script</td>
</tr>
<tr><td><tt class="docutils literal">COMMAND /C</tt></td>
<td>source or . (dot operator)</td>
<td>&quot;include&quot; another script (same as CALL)</td>
</tr>
<tr><td><tt class="docutils literal">SET</tt></td>
<td>export</td>
<td>set an environmental variable</td>
</tr>
<tr><td><tt class="docutils literal">SHIFT</tt></td>
<td>shift</td>
<td>left shift command-line argument list</td>
</tr>
<tr><td><tt class="docutils literal">SGN</tt></td>
<td>-lt or -gt</td>
<td>sign (of integer)</td>
</tr>
<tr><td><tt class="docutils literal">ERRORLEVEL</tt></td>
<td>$?</td>
<td>exit status</td>
</tr>
<tr><td><tt class="docutils literal">CON</tt></td>
<td><tt class="docutils literal">stdin</tt></td>
<td>&quot;console&quot; (<tt class="docutils literal">stdin</tt>)</td>
</tr>
<tr><td><tt class="docutils literal">PRN</tt></td>
<td><tt class="docutils literal">/dev/lp0</tt></td>
<td>(generic) printer device</td>
</tr>
<tr><td><tt class="docutils literal">LPT1</tt></td>
<td><tt class="docutils literal">/dev/lp0</tt></td>
<td>first printer device</td>
</tr>
<tr><td><tt class="docutils literal">COM1</tt></td>
<td><tt class="docutils literal">/dev/ttyS0</tt></td>
<td>first serial port</td>
</tr>
</tbody>
</table>
<p>Batch files usually contain DOS commands. These must be translated into
their UNIX equivalents in order to convert a batch file into a shell
script.</p>
<p><strong>Table M-2. DOS commands and their UNIX equivalents</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="29%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">DOS Command</th>
<th class="head">UNIX Equivalent</th>
<th class="head">Effect</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal">ASSIGN</tt></td>
<td>ln</td>
<td>link file or directory</td>
</tr>
<tr><td><tt class="docutils literal">ATTRIB</tt></td>
<td>chmod</td>
<td>change file permissions</td>
</tr>
<tr><td><tt class="docutils literal">CD</tt></td>
<td>cd</td>
<td>change directory</td>
</tr>
<tr><td><tt class="docutils literal">CHDIR</tt></td>
<td>cd</td>
<td>change directory</td>
</tr>
<tr><td><tt class="docutils literal">CLS</tt></td>
<td>clear</td>
<td>clear screen</td>
</tr>
<tr><td><tt class="docutils literal">COMP</tt></td>
<td>diff, comm, cmp</td>
<td>file compare</td>
</tr>
<tr><td><tt class="docutils literal">COPY</tt></td>
<td>cp</td>
<td>file copy</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">Ctl-C</span></tt></td>
<td>Ctl-C</td>
<td>break (signal)</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">Ctl-Z</span></tt></td>
<td>Ctl-D</td>
<td>EOF (end-of-file)</td>
</tr>
<tr><td><tt class="docutils literal">DEL</tt></td>
<td>rm</td>
<td>delete file(s)</td>
</tr>
<tr><td><tt class="docutils literal">DELTREE</tt></td>
<td>rm -rf</td>
<td>delete directory recursively</td>
</tr>
<tr><td><tt class="docutils literal">DIR</tt></td>
<td>ls -l</td>
<td>directory listing</td>
</tr>
<tr><td><tt class="docutils literal">ERASE</tt></td>
<td>rm</td>
<td>delete file(s)</td>
</tr>
<tr><td><tt class="docutils literal">EXIT</tt></td>
<td>exit</td>
<td>exit current process</td>
</tr>
<tr><td><tt class="docutils literal">FC</tt></td>
<td>comm, cmp</td>
<td>file compare</td>
</tr>
<tr><td><tt class="docutils literal">FIND</tt></td>
<td>grep</td>
<td>find strings in files</td>
</tr>
<tr><td><tt class="docutils literal">MD</tt></td>
<td>mkdir</td>
<td>make directory</td>
</tr>
<tr><td><tt class="docutils literal">MKDIR</tt></td>
<td>mkdir</td>
<td>make directory</td>
</tr>
<tr><td><tt class="docutils literal">MORE</tt></td>
<td>more</td>
<td>text file paging filter</td>
</tr>
<tr><td><tt class="docutils literal">MOVE</tt></td>
<td>mv</td>
<td>move</td>
</tr>
<tr><td><tt class="docutils literal">PATH</tt></td>
<td>$PATH</td>
<td>path to executables</td>
</tr>
<tr><td><tt class="docutils literal">REN</tt></td>
<td>mv</td>
<td>rename (move)</td>
</tr>
<tr><td><tt class="docutils literal">RENAME</tt></td>
<td>mv</td>
<td>rename (move)</td>
</tr>
<tr><td><tt class="docutils literal">RD</tt></td>
<td>rmdir</td>
<td>remove directory</td>
</tr>
<tr><td><tt class="docutils literal">RMDIR</tt></td>
<td>rmdir</td>
<td>remove directory</td>
</tr>
<tr><td><tt class="docutils literal">SORT</tt></td>
<td>sort</td>
<td>sort file</td>
</tr>
<tr><td><tt class="docutils literal">TIME</tt></td>
<td>date</td>
<td>display system time</td>
</tr>
<tr><td><tt class="docutils literal">TYPE</tt></td>
<td>cat</td>
<td>output file to <tt class="docutils literal">stdout</tt></td>
</tr>
<tr><td><tt class="docutils literal">XCOPY</tt></td>
<td>cp</td>
<td>(extended) file copy</td>
</tr>
</tbody>
</table>
<div class="figure align-center">
<img alt="Note" src="http://tldp.org/LDP/abs/images/note.gif" />
<p class="caption">Note</p>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/dosbatch.ca.rst</tt>, line 172)</p>
Explicit markup ends without a blank line; unexpected unindent.</div>
<p>Virtually all UNIX and shell operators and commands have many more
options and enhancements than their DOS and batch file counterparts.
Many DOS batch files rely on auxiliary utilities, such as <strong>ask.com</strong>, a
crippled counterpart to <a class="reference external" href="internal.html#READREF">read</a>.</p>
<p>DOS supports only a very limited and incompatible subset of filename
<a class="reference external" href="globbingref.html">wild-card expansion</a>, recognizing just the * and ?
characters.</p>
<p>Converting a DOS batch file into a shell script is generally
straightforward, and the result ofttimes reads better than the original.</p>
<p><strong>Example M-1. VIEWDATA.BAT: DOS Batch File</strong></p>
<pre class="literal-block">
REM VIEWDATA

REM INSPIRED BY AN EXAMPLE IN &quot;DOS POWERTOOLS&quot;
REM                           BY PAUL SOMERSON


&#64;ECHO OFF

IF !%1==! GOTO VIEWDATA
REM  IF NO COMMAND-LINE ARG...
FIND &quot;%1&quot; C:\BOZO\BOOKLIST.TXT
GOTO EXIT0
REM  PRINT LINE WITH STRING MATCH, THEN EXIT.

:VIEWDATA
TYPE C:\BOZO\BOOKLIST.TXT | MORE
REM  SHOW ENTIRE FILE, 1 PAGE AT A TIME.

:EXIT0
</pre>
<p>The script conversion is somewhat of an improvement.
<a class="reference external" href="dosbatch.html#FTN.AEN24436">[1]</a></p>
<p><strong>Example M-2. *viewdata.sh*: Shell Script Conversion of VIEWDATA.BAT</strong></p>
<pre class="literal-block">
#!/bin/bash
# viewdata.sh
# Conversion of VIEWDATA.BAT to shell script.

DATAFILE=/home/bozo/datafiles/book-collection.data
ARGNO=1

# &#64;ECHO OFF                 Command unnecessary here.

if [ $# -lt &quot;$ARGNO&quot; ]    # IF !%1==! GOTO VIEWDATA
then
  less $DATAFILE          # TYPE C:\MYDIR\BOOKLIST.TXT | MORE
else
  grep &quot;$1&quot; $DATAFILE     # FIND &quot;%1&quot; C:\MYDIR\BOOKLIST.TXT
fi

exit 0                    # :EXIT0

#  GOTOs, labels, smoke-and-mirrors, and flimflam unnecessary.
#  The converted script is short, sweet, and clean,
#+ which is more than can be said for the original.
</pre>
<p>Ted Davis' <a class="reference external" href="http://www.maem.umr.edu/batch/">Shell Scripts on the PC</a>
site has a set of comprehensive tutorials on the old-fashioned art of
batch file programming. Certain of his ingenious techniques could
conceivably have relevance for shell scripts.</p>
<div class="section" id="notes">
<h2>Notes</h2>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/dosbatch.ca.rst</tt>, line 10); <em><a href="#id2">backlink</a></em></p>
Duplicate explicit target name: &quot;[1]&quot;.</div>
<p><a class="reference external" href="dosbatch.html#AEN24436">[1]</a></p>
<p>Various readers have suggested modifications of the above batch file to
prettify it and make it more compact and efficient. In the opinion of
the <em>ABS Guide</em> author, this is wasted effort. A Bash script can access
a DOS filesystem, or even an NTFS partition (with the help of
<a class="reference external" href="http://www.ntfs-3g.org">ntfs-3g</a>) to do batch or scripted operations.</p>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="24%" />
<col width="27%" />
</colgroup>
<tbody valign="top">
<tr><td><a class="reference external" href="sample-bashrc.html">Prev</a></td>
<td><a class="reference external" href="index.html">Home</a></td>
<td><a class="reference external" href="exercises.html">Next</a></td>
</tr>
<tr><td>Sample <tt class="docutils literal">.bashrc</tt> and <tt class="docutils literal">.bash_profile</tt> Files</td>
<td>&nbsp;</td>
<td>Exercises</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>
