<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">rst-ca/here-docs.ca.rst</tt>, line 1)</p>
<p>Malformed table.</p>
<pre class="literal-block">
+----------------------------------+----+-------------------------+
| Advanced Bash-Scripting Guide:   |
+==================================+====+=========================+
| `Prev &lt;globbingref.html&gt;`_       |    | `Next &lt;x17700.html&gt;`_   |
+----------------------------------+----+-------------------------+
</pre>
</div>
<hr class="docutils" />
<div class="section" id="chapter-19-here-documents">
<h1>Chapter 19. Here Documents</h1>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a></p>
<div class="system-message" id="id1">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/here-docs.ca.rst</tt>, line 12); <em><a href="#id2">backlink</a></em></p>
Inline strong start-string without end-string.</div>
<p><em>Here and now, boys.</em></p>
<p><em>--Aldous Huxley, *Island*</em></p>
<p>A <em>here document</em> is a special-purpose code block. It uses a form of
<a class="reference external" href="io-redirection.html#IOREDIRREF">I/O redirection</a> to feed a command
list to an interactive program or a command, such as
<a class="reference external" href="communications.html#FTPREF">ftp</a>, <a class="reference external" href="basic.html#CATREF">cat</a>, or the
<em>ex</em> text editor.</p>
<pre class="literal-block">
COMMAND &lt;&lt;InputComesFromHERE
...
...
...
InputComesFromHERE
</pre>
<p>A <em>limit string</em> delineates (frames) the command list. The special
symbol &lt;&lt; precedes the limit string. This has the effect of redirecting
the output of a command block into the <tt class="docutils literal">stdin</tt> of the program or
command. It is similar to <tt class="docutils literal"><span class="pre">interactive-program</span> &lt;&nbsp;&nbsp;&nbsp;&nbsp; <span class="pre">command-file</span></tt>,
where <tt class="docutils literal"><span class="pre">command-file</span></tt> contains</p>
<pre class="literal-block">
command #1
command #2
...
</pre>
<p>The <em>here document</em> equivalent looks like this:</p>
<pre class="literal-block">
interactive-program &lt;&lt;LimitString
command #1
command #2
...
LimitString
</pre>
<p>Choose a <em>limit string</em> sufficiently unusual that it will not occur
anywhere in the command list and confuse matters.</p>
<p>Note that <em>here documents</em> may sometimes be used to good effect with
non-interactive utilities and commands, such as, for example,
<a class="reference external" href="system.html#WALLREF">wall</a>.</p>
<p><strong>Example 19-1. *broadcast*: Sends message to everyone logged in</strong></p>
<pre class="literal-block">
#!/bin/bash

wall &lt;&lt;zzz23EndOfMessagezzz23
E-mail your noontime orders for pizza to the system administrator.
    (Add an extra dollar for anchovy or mushroom topping.)
# Additional message text goes here.
# Note: 'wall' prints comment lines.
zzz23EndOfMessagezzz23

# Could have been done more efficiently by
#         wall &lt;message-file
#  However, embedding the message template in a script
#+ is a quick-and-dirty one-off solution.

exit
</pre>
<p>Even such unlikely candidates as the <em>vi</em> text editor lend themselves to
<em>here documents</em>.</p>
<p><strong>Example 19-2. *dummyfile*: Creates a 2-line dummy file</strong></p>
<pre class="literal-block">
#!/bin/bash

# Noninteractive use of 'vi' to edit a file.
# Emulates 'sed'.

E_BADARGS=85

if [ -z &quot;$1&quot; ]
then
  echo &quot;Usage: `basename $0` filename&quot;
  exit $E_BADARGS
fi

TARGETFILE=$1

# Insert 2 lines in file, then save.
#--------Begin here document-----------#
vi $TARGETFILE &lt;&lt;x23LimitStringx23
i
This is line 1 of the example file.
This is line 2 of the example file.
^[
ZZ
x23LimitStringx23
#----------End here document-----------#

#  Note that ^[ above is a literal escape
#+ typed by Control-V &lt;Esc&gt;.

#  Bram Moolenaar points out that this may not work with 'vim'
#+ because of possible problems with terminal interaction.

exit
</pre>
<p>The above script could just as effectively have been implemented with
<strong>ex</strong>, rather than <strong>vi</strong>. <em>Here documents</em> containing a list of <strong>ex</strong>
commands are common enough to form their own category, known as <em>ex
scripts</em>.</p>
<pre class="literal-block">
#!/bin/bash
#  Replace all instances of &quot;Smith&quot; with &quot;Jones&quot;
#+ in files with a &quot;.txt&quot; filename suffix.

ORIGINAL=Smith
REPLACEMENT=Jones

for word in $(fgrep -l $ORIGINAL *.txt)
do
  # -------------------------------------
  ex $word &lt;&lt;EOF
  :%s/$ORIGINAL/$REPLACEMENT/g
  :wq
EOF
  # :%s is the &quot;ex&quot; substitution command.
  # :wq is write-and-quit.
  # -------------------------------------
done
</pre>
<p>Analogous to &quot;ex scripts&quot; are <em>cat scripts</em>.</p>
<p><strong>Example 19-3. Multi-line message using *cat*</strong></p>
<pre class="literal-block">
#!/bin/bash

#  'echo' is fine for printing single line messages,
#+  but somewhat problematic for for message blocks.
#   A 'cat' here document overcomes this limitation.

cat &lt;&lt;End-of-message
-------------------------------------
This is line 1 of the message.
This is line 2 of the message.
This is line 3 of the message.
This is line 4 of the message.
This is the last line of the message.
-------------------------------------
End-of-message

#  Replacing line 7, above, with
#+   cat &gt; $Newfile &lt;&lt;End-of-message
#+       ^^^^^^^^^^
#+ writes the output to the file $Newfile, rather than to stdout.

exit 0


#--------------------------------------------
# Code below disabled, due to &quot;exit 0&quot; above.

# S.C. points out that the following also works.
echo &quot;-------------------------------------
This is line 1 of the message.
This is line 2 of the message.
This is line 3 of the message.
This is line 4 of the message.
This is the last line of the message.
-------------------------------------&quot;
# However, text may not include double quotes unless they are escaped.
</pre>
<p>The <tt class="docutils literal">-</tt> option to mark a here document limit string
(<tt class="docutils literal"><span class="pre">&lt;&lt;-LimitString</span></tt>) suppresses leading tabs (but not spaces) in the
output. This may be useful in making a script more readable.</p>
<p><strong>Example 19-4. Multi-line message, with tabs suppressed</strong></p>
<pre class="literal-block">
#!/bin/bash
# Same as previous example, but...

#  The - option to a here document &lt;&lt;-
#+ suppresses leading tabs in the body of the document,
#+ but *not* spaces.

cat &lt;&lt;-ENDOFMESSAGE
    This is line 1 of the message.
    This is line 2 of the message.
    This is line 3 of the message.
    This is line 4 of the message.
    This is the last line of the message.
ENDOFMESSAGE
# The output of the script will be flush left.
# Leading tab in each line will not show.

# Above 5 lines of &quot;message&quot; prefaced by a tab, not spaces.
# Spaces not affected by   &lt;&lt;-  .

# Note that this option has no effect on *embedded* tabs.

exit 0
</pre>
<p>A <em>here document</em> supports parameter and command substitution. It is
therefore possible to pass different parameters to the body of the here
document, changing its output accordingly.</p>
<p><strong>Example 19-5. Here document with replaceable parameters</strong></p>
<pre class="literal-block">
#!/bin/bash
# Another 'cat' here document, using parameter substitution.

# Try it with no command-line parameters,   ./scriptname
# Try it with one command-line parameter,   ./scriptname Mortimer
# Try it with one two-word quoted command-line parameter,
#                           ./scriptname &quot;Mortimer Jones&quot;

CMDLINEPARAM=1     #  Expect at least command-line parameter.

if [ $# -ge $CMDLINEPARAM ]
then
  NAME=$1          #  If more than one command-line param,
                   #+ then just take the first.
else
  NAME=&quot;John Doe&quot;  #  Default, if no command-line parameter.
fi

RESPONDENT=&quot;the author of this fine script&quot;


cat &lt;&lt;Endofmessage

Hello, there, $NAME.
Greetings to you, $NAME, from $RESPONDENT.

# This comment shows up in the output (why?).

Endofmessage

# Note that the blank lines show up in the output.
# So does the comment.

exit
</pre>
<p>This is a useful script containing a <em>here document</em> with parameter
substitution.</p>
<p><strong>Example 19-6. Upload a file pair to *Sunsite* incoming directory</strong></p>
<pre class="literal-block">
#!/bin/bash
# upload.sh

#  Upload file pair (Filename.lsm, Filename.tar.gz)
#+ to incoming directory at Sunsite/UNC (ibiblio.org).
#  Filename.tar.gz is the tarball itself.
#  Filename.lsm is the descriptor file.
#  Sunsite requires &quot;lsm&quot; file, otherwise will bounce contributions.


E_ARGERROR=85

if [ -z &quot;$1&quot; ]
then
  echo &quot;Usage: `basename $0` Filename-to-upload&quot;
  exit $E_ARGERROR
fi


Filename=`basename $1`           # Strips pathname out of file name.

Server=&quot;ibiblio.org&quot;
Directory=&quot;/incoming/Linux&quot;
#  These need not be hard-coded into script,
#+ but may instead be changed to command-line argument.

Password=&quot;your.e-mail.address&quot;   # Change above to suit.

ftp -n $Server &lt;&lt;End-Of-Session
# -n option disables auto-logon

user anonymous &quot;$Password&quot;       #  If this doesn't work, then try:
                                 #  quote user anonymous &quot;$Password&quot;
binary
bell                             # Ring 'bell' after each file transfer.
cd $Directory
put &quot;$Filename.lsm&quot;
put &quot;$Filename.tar.gz&quot;
bye
End-Of-Session

exit 0
</pre>
<p>Quoting or escaping the &quot;limit string&quot; at the head of a here document
disables parameter substitution within its body. The reason for this is
that <em>quoting/escaping the limit string</em> effectively
<a class="reference external" href="escapingsection.html#ESCP">escapes</a> the $, `, and \ <a class="reference external" href="special-chars.html#SCHARLIST">special
characters</a>, and causes them to be
interpreted literally. (Thank you, Allen Halsey, for pointing this out.)</p>
<p><strong>Example 19-7. Parameter substitution turned off</strong></p>
<pre class="literal-block">
#!/bin/bash
#  A 'cat' here-document, but with parameter substitution disabled.

NAME=&quot;John Doe&quot;
RESPONDENT=&quot;the author of this fine script&quot;

cat &lt;&lt;'Endofmessage'

Hello, there, $NAME.
Greetings to you, $NAME, from $RESPONDENT.

Endofmessage

#   No parameter substitution when the &quot;limit string&quot; is quoted or escaped.
#   Either of the following at the head of the here document would have
#+  the same effect.
#   cat &lt;&lt;&quot;Endofmessage&quot;
#   cat &lt;&lt;\Endofmessage



#   And, likewise:

cat &lt;&lt;&quot;SpecialCharTest&quot;

Directory listing would follow
if limit string were not quoted.
`ls -l`

Arithmetic expansion would take place
if limit string were not quoted.
$((5 + 3))

A a single backslash would echo
if limit string were not quoted.
\\

SpecialCharTest


exit
</pre>
<p>Disabling parameter substitution permits outputting literal text.
Generating scripts or even program code is one use for this.</p>
<p><strong>Example 19-8. A script that generates another script</strong></p>
<pre class="literal-block">
#!/bin/bash
# generate-script.sh
# Based on an idea by Albert Reiner.

OUTFILE=generated.sh         # Name of the file to generate.


# -----------------------------------------------------------
# 'Here document containing the body of the generated script.
(
cat &lt;&lt;'EOF'
#!/bin/bash

echo &quot;This is a generated shell script.&quot;
#  Note that since we are inside a subshell,
#+ we can't access variables in the &quot;outside&quot; script.

echo &quot;Generated file will be named: $OUTFILE&quot;
#  Above line will not work as normally expected
#+ because parameter expansion has been disabled.
#  Instead, the result is literal output.

a=7
b=3

let &quot;c = $a * $b&quot;
echo &quot;c = $c&quot;

exit 0
EOF
) &gt; $OUTFILE
# -----------------------------------------------------------

#  Quoting the 'limit string' prevents variable expansion
#+ within the body of the above 'here document.'
#  This permits outputting literal strings in the output file.

if [ -f &quot;$OUTFILE&quot; ]
then
  chmod 755 $OUTFILE
  # Make the generated file executable.
else
  echo &quot;Problem in creating file: \&quot;$OUTFILE\&quot;&quot;
fi

#  This method can also be used for generating
#+ C programs, Perl programs, Python programs, Makefiles,
#+ and the like.

exit 0
</pre>
<p>It is possible to set a variable from the output of a here document.
This is actually a devious form of <a class="reference external" href="commandsub.html#COMMANDSUBREF">command
substitution</a>.</p>
<pre class="literal-block">
variable=$(cat &lt;&lt;SETVAR
This variable
runs over multiple lines.
SETVAR)

echo &quot;$variable&quot;
</pre>
<p>A here document can supply input to a function in the same script.</p>
<p><strong>Example 19-9. Here documents and functions</strong></p>
<pre class="literal-block">
#!/bin/bash
# here-function.sh

GetPersonalData ()
{
  read firstname
  read lastname
  read address
  read city
  read state
  read zipcode
} # This certainly looks like an interactive function, but...


# Supply input to the above function.
GetPersonalData &lt;&lt;RECORD001
Bozo
Bozeman
2726 Nondescript Dr.
Baltimore
MD
21226
RECORD001


echo
echo &quot;$firstname $lastname&quot;
echo &quot;$address&quot;
echo &quot;$city, $state $zipcode&quot;
echo

exit 0
</pre>
<p>It is possible to use : as a dummy command accepting output from a here
document. This, in effect, creates an &quot;anonymous&quot; here document.</p>
<p><strong>Example 19-10. &quot;Anonymous&quot; Here Document</strong></p>
<pre class="literal-block">
#!/bin/bash

: &lt;&lt;TESTVARIABLES
${HOSTNAME?}${USER?}${MAIL?}  # Print error message if one of the variables not set.
TESTVARIABLES

exit $?
</pre>
<div class="figure align-center">
<img alt="Tip" src="http://tldp.org/LDP/abs/images/tip.gif" />
<p class="caption">Tip</p>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/here-docs.ca.rst</tt>, line 499)</p>
Explicit markup ends without a blank line; unexpected unindent.</div>
<p>A variation of the above technique permits &quot;commenting out&quot; blocks of
code.</p>
<p><strong>Example 19-11. Commenting out a block of code</strong></p>
<pre class="literal-block">
#!/bin/bash
# commentblock.sh

: &lt;&lt;COMMENTBLOCK
echo &quot;This line will not echo.&quot;
This is a comment line missing the &quot;#&quot; prefix.
This is another comment line missing the &quot;#&quot; prefix.

&amp;*&#64;!!++=
The above line will cause no error message,
because the Bash interpreter will ignore it.
COMMENTBLOCK

echo &quot;Exit value of above \&quot;COMMENTBLOCK\&quot; is $?.&quot;   # 0
# No error shown.
echo


#  The above technique also comes in useful for commenting out
#+ a block of working code for debugging purposes.
#  This saves having to put a &quot;#&quot; at the beginning of each line,
#+ then having to go back and delete each &quot;#&quot; later.
#  Note that the use of of colon, above, is optional.

echo &quot;Just before commented-out code block.&quot;
#  The lines of code between the double-dashed lines will not execute.
#  ===================================================================
: &lt;&lt;DEBUGXXX
for file in *
do
 cat &quot;$file&quot;
done
DEBUGXXX
#  ===================================================================
echo &quot;Just after commented-out code block.&quot;

exit 0



######################################################################
#  Note, however, that if a bracketed variable is contained within
#+ the commented-out code block,
#+ then this could cause problems.
#  for example:


#/!/bin/bash

  : &lt;&lt;COMMENTBLOCK
  echo &quot;This line will not echo.&quot;
  &amp;*&#64;!!++=
  ${foo_bar_bazz?}
  $(rm -rf /tmp/foobar/)
  $(touch my_build_directory/cups/Makefile)
COMMENTBLOCK


$ sh commented-bad.sh
commented-bad.sh: line 3: foo_bar_bazz: parameter null or not set

# The remedy for this is to strong-quote the 'COMMENTBLOCK' in line 49, above.

  : &lt;&lt;'COMMENTBLOCK'

# Thank you, Kurt Pfeifle, for pointing this out.
</pre>
<div class="figure align-center">
<img alt="Tip" src="http://tldp.org/LDP/abs/images/tip.gif" />
<p class="caption">Tip</p>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/here-docs.ca.rst</tt>, line 578)</p>
Explicit markup ends without a blank line; unexpected unindent.</div>
<p>Yet another twist of this nifty trick makes &quot;self-documenting&quot; scripts
possible.</p>
<p><strong>Example 19-12. A self-documenting script</strong></p>
<pre class="literal-block">
#!/bin/bash
# self-document.sh: self-documenting script
# Modification of &quot;colm.sh&quot;.

DOC_REQUEST=70

if [ &quot;$1&quot; = &quot;-h&quot;  -o &quot;$1&quot; = &quot;--help&quot; ]     # Request help.
then
  echo; echo &quot;Usage: $0 [directory-name]&quot;; echo
  sed --silent -e '/DOCUMENTATIONXX$/,/^DOCUMENTATIONXX$/p' &quot;$0&quot; |
  sed -e '/DOCUMENTATIONXX$/d'; exit $DOC_REQUEST; fi


: &lt;&lt;DOCUMENTATIONXX
List the statistics of a specified directory in tabular format.
---------------------------------------------------------------
The command-line parameter gives the directory to be listed.
If no directory specified or directory specified cannot be read,
then list the current working directory.

DOCUMENTATIONXX

if [ -z &quot;$1&quot; -o ! -r &quot;$1&quot; ]
then
  directory=.
else
  directory=&quot;$1&quot;
fi

echo &quot;Listing of &quot;$directory&quot;:&quot;; echo
(printf &quot;PERMISSIONS LINKS OWNER GROUP SIZE MONTH DAY HH:MM PROG-NAME\n&quot; \
; ls -l &quot;$directory&quot; | sed 1d) | column -t

exit 0
</pre>
<p>Using a <a class="reference external" href="here-docs.html#CATSCRIPTREF">cat script</a> is an alternate way
of accomplishing this.</p>
<pre class="literal-block">
DOC_REQUEST=70

if [ &quot;$1&quot; = &quot;-h&quot;  -o &quot;$1&quot; = &quot;--help&quot; ]     # Request help.
then                                       # Use a &quot;cat script&quot; . . .
  cat &lt;&lt;DOCUMENTATIONXX
List the statistics of a specified directory in tabular format.
---------------------------------------------------------------
The command-line parameter gives the directory to be listed.
If no directory specified or directory specified cannot be read,
then list the current working directory.

DOCUMENTATIONXX
exit $DOC_REQUEST
fi
</pre>
<p>See also <a class="reference external" href="contributed-scripts.html#ISSPAMMER2">Example A-28</a>, <a class="reference external" href="contributed-scripts.html#PETALS">Example
A-40</a>, <a class="reference external" href="contributed-scripts.html#QKY">Example
A-41</a>, and <a class="reference external" href="contributed-scripts.html#NIM">Example
A-42</a> for more examples of
self-documenting scripts.</p>
<div class="figure align-center">
<img alt="Note" src="http://tldp.org/LDP/abs/images/note.gif" />
<p class="caption">Note</p>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/here-docs.ca.rst</tt>, line 651)</p>
Explicit markup ends without a blank line; unexpected unindent.</div>
<p>Here documents create temporary files, but these files are deleted after
opening and are not accessible to any other process.</p>
<pre class="literal-block">
bash$ bash -c 'lsof -a -p $$ -d0' &lt;&lt; EOF
&gt; EOF
lsof    1213 bozo    0r   REG    3,5    0 30386 /tmp/t1213-0-sh (deleted)
</pre>
<div class="figure align-center">
<img alt="Caution" src="http://tldp.org/LDP/abs/images/caution.gif" />
<p class="caption">Caution</p>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/here-docs.ca.rst</tt>, line 666)</p>
Explicit markup ends without a blank line; unexpected unindent.</div>
<p>Some utilities will not work inside a <em>here document</em>.</p>
<div class="figure align-center">
<img alt="Warning" src="http://tldp.org/LDP/abs/images/warning.gif" />
<p class="caption">Warning</p>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/here-docs.ca.rst</tt>, line 673)</p>
Explicit markup ends without a blank line; unexpected unindent.</div>
<p>The closing <em>limit string</em>, on the final line of a here document, must
start in the <em>first</em> character position. There can be <em>no leading
whitespace</em>. Trailing whitespace after the limit string likewise causes
unexpected behavior. The whitespace prevents the limit string from being
recognized. <a class="reference external" href="here-docs.html#FTN.AEN17685">[1]</a></p>
<pre class="literal-block">
#!/bin/bash

echo &quot;----------------------------------------------------------------------&quot;

cat &lt;&lt;LimitString
echo &quot;This is line 1 of the message inside the here document.&quot;
echo &quot;This is line 2 of the message inside the here document.&quot;
echo &quot;This is the final line of the message inside the here document.&quot;
     LimitString
#^^^^Indented limit string. Error! This script will not behave as expected.

echo &quot;----------------------------------------------------------------------&quot;

#  These comments are outside the 'here document',
#+ and should not echo.

echo &quot;Outside the here document.&quot;

exit 0

echo &quot;This line had better not echo.&quot;  # Follows an 'exit' command.
</pre>
<div class="figure align-center">
<img alt="Caution" src="http://tldp.org/LDP/abs/images/caution.gif" />
<p class="caption">Caution</p>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/here-docs.ca.rst</tt>, line 708)</p>
Explicit markup ends without a blank line; unexpected unindent.</div>
<p>Some people very cleverly use a single ! as a limit string. But, that's
not necessarily a good idea.</p>
<pre class="literal-block">
# This works.
cat &lt;&lt;!
Hello!
! Three more exclamations !!!
!


# But . . .
cat &lt;&lt;!
Hello!
Single exclamation point follows!
!
!
# Crashes with an error message.


# However, the following will work.
cat &lt;&lt;EOF
Hello!
Single exclamation point follows!
!
EOF
# It's safer to use a multi-character limit string.
</pre>
<p>For those tasks too complex for a <em>here document</em>, consider using the
<tt class="docutils literal">expect</tt> scripting language, which was specifically designed for
feeding input into interactive programs.</p>
<div class="section" id="notes">
<h2>Notes</h2>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/here-docs.ca.rst</tt>, line 10); <em><a href="#id4">backlink</a></em></p>
Duplicate explicit target name: &quot;[1]&quot;.</div>
<p><a class="reference external" href="here-docs.html#AEN17685">[1]</a></p>
<p>Except, as Dennis Benzinger points out, if <a class="reference external" href="here-docs.html#LIMITSTRDASH">using **&lt;&lt;-** to suppress
tabs</a>.</p>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="30%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr><td><a class="reference external" href="globbingref.html">Prev</a></td>
<td><a class="reference external" href="index.html">Home</a></td>
<td><a class="reference external" href="x17700.html">Next</a></td>
</tr>
<tr><td>Globbing</td>
<td><a class="reference external" href="part5.html">Up</a></td>
<td>Here Strings</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>
