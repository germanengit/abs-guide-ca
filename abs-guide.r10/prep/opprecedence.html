<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
 <head>
  <title>
   Operator Precedence
  </title>
  <meta content="Modular DocBook HTML Stylesheet Version 1.7" name="GENERATOR"/>
  <link href="index.html" rel="HOME" title="Advanced Bash-Scripting Guide"/>
  <link href="operations.html" rel="UP" title="Operations and Related Topics"/>
  <link href="dblparens.html" rel="PREVIOUS" title="The Double-Parentheses Construct"/>
  <link href="part3.html" rel="NEXT" title="Beyond the Basics"/>
 </head>
 <body alink="#0000FF" bgcolor="#FFFFFF" class="SECT1" link="#0000FF" text="#000000" vlink="#840084">
  <div class="SECT1">
   <h1 class="SECT1">
    <a name="OPPRECEDENCE">
    </a>
    8.4. Operator Precedence
   </h1>
   <p>
    <a name="OPPRECEDENCE1">
    </a>
   </p>
   <p>
    In a script, operations execute in order of
    <i class="FIRSTTERM">
     precedence
    </i>
    : the higher precedence operations
	execute
    <em>
     before
    </em>
    the lower precedence ones.
    <a href="opprecedence.html#FTN.AEN4290" name="AEN4290">
     <span class="footnote">
      [1]
     </span>
    </a>
   </p>
   <div class="TABLE">
    <a name="AEN4294">
    </a>
    <p>
     <b>
      Table 8-1. Operator Precedence
     </b>
    </p>
    <div>
     <p>
      Operator
     </p>
     <p>
      Meaning
     </p>
     <p>
      Comments
     </p>
     <p>
      <tt class="OPTION">
      </tt>
     </p>
     <p>
     </p>
     <p>
      <b class="COMMAND">
       HIGHEST PRECEDENCE
      </b>
     </p>
     <p>
      <tt class="OPTION">
       var++ var--
      </tt>
     </p>
     <p>
      post-increment, post-decrement
     </p>
     <p>
      <a href="assortedtips.html#CSTYLE">
       C-style
      </a>
      operators
     </p>
     <p>
      <tt class="OPTION">
       ++var --var
      </tt>
     </p>
     <p>
      pre-increment, pre-decrement
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      <tt class="OPTION">
       ! ~
      </tt>
     </p>
     <p>
      <a href="special-chars.html#NOTREF">
       negation
      </a>
     </p>
     <p>
      logical / bitwise, inverts sense of following
	        operator
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      <tt class="OPTION">
       **
      </tt>
     </p>
     <p>
      <a href="ops.html#EXPONENTIATIONREF">
       exponentiation
      </a>
     </p>
     <p>
      <a href="ops.html#AROPS1">
       arithmetic
	        operation
      </a>
     </p>
     <p>
      <tt class="OPTION">
       * / %
      </tt>
     </p>
     <p>
      multiplication, division, modulo
     </p>
     <p>
      arithmetic operation
     </p>
     <p>
      <tt class="OPTION">
       + -
      </tt>
     </p>
     <p>
      addition, subtraction
     </p>
     <p>
      arithmetic operation
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      <tt class="OPTION">
       &lt;&lt; &gt;&gt;
      </tt>
     </p>
     <p>
      left, right shift
     </p>
     <p>
      <a href="ops.html#BITWSOPS1">
       bitwise
      </a>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      <tt class="OPTION">
       -z -n
      </tt>
     </p>
     <p>
      <i class="FIRSTTERM">
       unary
      </i>
      comparison
     </p>
     <p>
      string is/is-not
      <a href="comparison-ops.html#STRINGNULL">
       null
      </a>
     </p>
     <p>
      <tt class="OPTION">
       -e -f -t -x, etc.
      </tt>
     </p>
     <p>
      <i class="FIRSTTERM">
       unary
      </i>
      comparison
     </p>
     <p>
      <a href="fto.html">
       file-test
      </a>
     </p>
     <p>
      <tt class="OPTION">
       &lt; -lt &gt; -gt &lt;= -le &gt;= -ge
      </tt>
     </p>
     <p>
      <i class="FIRSTTERM">
       compound
      </i>
      comparison
     </p>
     <p>
      string and integer
     </p>
     <p>
      <tt class="OPTION">
       -nt -ot -ef
      </tt>
     </p>
     <p>
      <i class="FIRSTTERM">
       compound
      </i>
      comparison
     </p>
     <p>
      file-test
     </p>
     <p>
      <tt class="OPTION">
       == -eq
       <a href="comparison-ops.html#NOTEQUAL">
        !=
       </a>
       -ne
      </tt>
     </p>
     <p>
      equality / inequality
     </p>
     <p>
      test operators, string and integer
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      <tt class="OPTION">
       &amp;
      </tt>
     </p>
     <p>
      AND
     </p>
     <p>
      bitwise
     </p>
     <p>
      <tt class="OPTION">
       ^
      </tt>
     </p>
     <p>
      XOR
     </p>
     <p>
      <i class="FIRSTTERM">
       exclusive
      </i>
      OR, bitwise
     </p>
     <p>
      <tt class="OPTION">
       |
      </tt>
     </p>
     <p>
      OR
     </p>
     <p>
      bitwise
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      <tt class="OPTION">
       &amp;&amp; -a
      </tt>
     </p>
     <p>
      AND
     </p>
     <p>
      <a href="ops.html#LOGOPS1">
       logical
      </a>
      ,
      <i class="FIRSTTERM">
       compound
      </i>
      comparison
     </p>
     <p>
      <tt class="OPTION">
       || -o
      </tt>
     </p>
     <p>
      OR
     </p>
     <p>
      logical,
      <i class="FIRSTTERM">
       compound
      </i>
      comparison
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      <tt class="OPTION">
       ?:
      </tt>
     </p>
     <p>
      <a href="special-chars.html#CSTRINARY">
       trinary
	        operator
      </a>
     </p>
     <p>
      C-style
     </p>
     <p>
      <tt class="OPTION">
       =
      </tt>
     </p>
     <p>
      <a href="varassignment.html#EQREF">
       assignment
      </a>
     </p>
     <p>
      (do not confuse with equality
      <i class="FIRSTTERM">
       test
      </i>
      )
     </p>
     <p>
      <tt class="OPTION">
       *= /= %= += -= &lt;&lt;= &gt;&gt;= &amp;=
      </tt>
     </p>
     <p>
      <a href="ops.html#ARITHOPSCOMB">
       combination
	        assignment
      </a>
     </p>
     <p>
      times-equal, divide-equal, mod-equal, etc.
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
     </p>
     <p>
      <tt class="OPTION">
       ,
      </tt>
     </p>
     <p>
      <a href="ops.html#COMMAOP">
       comma
      </a>
     </p>
     <p>
      links a sequence of operations
     </p>
     <p>
      <tt class="OPTION">
      </tt>
     </p>
     <p>
     </p>
     <p>
      <b class="COMMAND">
       LOWEST PRECEDENCE
      </b>
     </p>
    </div>
   </div>
   <p>
    In practice, all you really need to remember is the
      following:
   </p>
   <p>
   </p>
   <ul>
    <li>
     <p>
      The
      <span class="QUOTE">
       "My Dear Aunt Sally"
      </span>
      mantra (
      <em>
       multiply,
	  divide, add, subtract
      </em>
      ) for the familiar
      <a href="ops.html#AROPS1">
       arithmetic operations
      </a>
      .
     </p>
    </li>
    <li>
     <p>
      The
      <i class="FIRSTTERM">
       compound
      </i>
      logical operators,
      <b class="COMMAND">
       &amp;&amp;
      </b>
      ,
      <b class="COMMAND">
       ||
      </b>
      ,
      <b class="COMMAND">
       -a
      </b>
      ,
	  and
      <b class="COMMAND">
       -o
      </b>
      have low precedence.
     </p>
    </li>
    <li>
     <p>
      The order of evaluation of equal-precedence operators is
	  usually
      <i class="FIRSTTERM">
       left-to-right
      </i>
      .
     </p>
    </li>
   </ul>
   <p>
    Now, let's utilize our knowledge of operator precedence to
	  analyze a couple of lines from the
    <tt class="FILENAME">
     /etc/init.d/functions file
    </tt>
    , as found in
	  the
    <i class="FIRSTTERM">
     Fedora Core
    </i>
    Linux distro.
   </p>
   <p>
   </p>
   <div>
    <p>
     <font color="#000000">
      <pre class="PROGRAMLISTING">while [ -n "$remaining" -a "$retry" -gt 0 ]; do

# This looks rather daunting at first glance.


# Separate the conditions:
while [ -n "$remaining" -a "$retry" -gt 0 ]; do
#       --condition 1-- ^^ --condition 2-

#  If variable "$remaining" is not zero length
#+      AND (-a)
#+ variable "$retry" is greater-than zero
#+ then
#+ the [ expresion-within-condition-brackets ] returns success (0)
#+ and the while-loop executes an iteration.
#  ==============================================================
#  Evaluate "condition 1" and "condition 2" ***before***
#+ ANDing them. Why? Because the AND (-a) has a lower precedence
#+ than the -n and -gt operators,
#+ and therefore gets evaluated *last*.

#################################################################

if [ -f /etc/sysconfig/i18n -a -z "${NOLOCALE:-}" ] ; then


# Again, separate the conditions:
if [ -f /etc/sysconfig/i18n -a -z "${NOLOCALE:-}" ] ; then
#    --condition 1--------- ^^ --condition 2-----

#  If file "/etc/sysconfig/i18n" exists
#+      AND (-a)
#+ variable $NOLOCALE is zero length
#+ then
#+ the [ test-expresion-within-condition-brackets ] returns success (0)
#+ and the commands following execute.
#
#  As before, the AND (-a) gets evaluated *last*
#+ because it has the lowest precedence of the operators within
#+ the test brackets.
#  ==============================================================
#  Note:
#  ${NOLOCALE:-} is a parameter expansion that seems redundant.
#  But, if $NOLOCALE has not been declared, it gets set to *null*,
#+ in effect declaring it.
#  This makes a difference in some contexts.</pre>
     </font>
    </p>
   </div>
   <div class="TIP">
    <p>
    </p>
    <div>
     <p>
      <img alt="Tip" hspace="5" src="../images/tip.gif"/>
     </p>
     <p>
      <p>
       To avoid confusion or error in a complex sequence of test
        operators, break up the sequence into bracketed sections.
      </p>
      <table bgcolor="#E0E0E0" border="0" width="100%">
       <tr>
        <td>
         <font color="#000000">
          <pre class="PROGRAMLISTING">if [ "$v1" -gt "$v2"  -o  "$v1" -lt "$v2"  -a  -e "$filename" ]
# Unclear what's going on here...

if [[ "$v1" -gt "$v2" ]] || [[ "$v1" -lt "$v2" ]] &amp;&amp; [[ -e "$filename" ]]
# Much better -- the condition tests are grouped in logical sections.</pre>
         </font>
        </td>
       </tr>
      </table>
     </p>
     <p>
      <font color="#000000">
       <pre class="PROGRAMLISTING">if [ "$v1" -gt "$v2"  -o  "$v1" -lt "$v2"  -a  -e "$filename" ]
# Unclear what's going on here...

if [[ "$v1" -gt "$v2" ]] || [[ "$v1" -lt "$v2" ]] &amp;&amp; [[ -e "$filename" ]]
# Much better -- the condition tests are grouped in logical sections.</pre>
      </font>
     </p>
     <p>
      <font color="#000000">
       <pre class="PROGRAMLISTING">if [ "$v1" -gt "$v2"  -o  "$v1" -lt "$v2"  -a  -e "$filename" ]
# Unclear what's going on here...

if [[ "$v1" -gt "$v2" ]] || [[ "$v1" -lt "$v2" ]] &amp;&amp; [[ -e "$filename" ]]
# Much better -- the condition tests are grouped in logical sections.</pre>
      </font>
     </p>
    </div>
   </div>
  </div>
  <h3 class="FOOTNOTES">
   Notes
  </h3>
  <div>
   <p>
    <a href="opprecedence.html#AEN4290" name="FTN.AEN4290">
     <span class="footnote">
      [1]
     </span>
    </a>
   </p>
   <p>
    <p>
     <i class="FIRSTTERM">
      Precedence
     </i>
     , in this context,
	    has approximately the same meaning as
     <i class="FIRSTTERM">
      priority
     </i>
    </p>
   </p>
  </div>
 </body>
</html>