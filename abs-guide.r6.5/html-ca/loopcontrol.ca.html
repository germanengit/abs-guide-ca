<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">rst-ca/loopcontrol.ca.rst</tt>, line 1)</p>
<p>Malformed table.</p>
<pre class="literal-block">
+----------------------------------+----------------------------------+-----------------------------+
| Advanced Bash-Scripting Guide:   |
+==================================+==================================+=============================+
| `Prev &lt;nestedloops.html&gt;`_       | Chapter 11. Loops and Branches   | `Next &lt;testbranch.html&gt;`_   |
+----------------------------------+----------------------------------+-----------------------------+
</pre>
</div>
<hr class="docutils" />
<div class="section" id="loop-control">
<h1>11.3. Loop Control</h1>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a></p>
<div class="system-message" id="id1">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/loopcontrol.ca.rst</tt>, line 12); <em><a href="#id2">backlink</a></em></p>
Inline strong start-string without end-string.</div>
<p><em>Tournez cent tours, tournez mille tours,</em></p>
<p><em>Tournez souvent et tournez toujours . . .</em></p>
<p><em>--Verlaine, &quot;Chevaux de bois&quot;</em></p>
<p><strong>Commands affecting loop behavior</strong></p>
<dl class="docutils">
<dt><strong>break</strong>, <strong>continue</strong></dt>
<dd><p class="first">The <strong>break</strong> and <strong>continue</strong> loop control commands
<a class="reference external" href="loopcontrol.html#FTN.AEN6927">[1]</a> correspond exactly to their
counterparts in other programming languages. The <strong>break</strong> command
terminates the loop (<em>breaks</em> out of it), while <strong>continue</strong> causes
a jump to the next <a class="reference external" href="loops1.html#ITERATIONREF">iteration</a> of the
loop, skipping all the remaining commands in that particular loop
cycle.</p>
<p><strong>Example 11-20. Effects of *break* and **continue</strong> in a loop**</p>
<pre class="literal-block">
#!/bin/bash

LIMIT=19  # Upper limit

echo
echo &quot;Printing Numbers 1 through 20 (but not 3 and 11).&quot;

a=0

while [ $a -le &quot;$LIMIT&quot; ]
do
 a=$(($a+1))

 if [ &quot;$a&quot; -eq 3 ] || [ &quot;$a&quot; -eq 11 ]  # Excludes 3 and 11.
 then
   continue      # Skip rest of this particular loop iteration.
 fi

 echo -n &quot;$a &quot;   # This will not execute for 3 and 11.
done

# Exercise:
# Why does the loop print up to 20?

echo; echo

echo Printing Numbers 1 through 20, but something happens after 2.

##################################################################

# Same loop, but substituting 'break' for 'continue'.

a=0

while [ &quot;$a&quot; -le &quot;$LIMIT&quot; ]
do
 a=$(($a+1))

 if [ &quot;$a&quot; -gt 2 ]
 then
   break  # Skip entire rest of loop.
 fi

 echo -n &quot;$a &quot;
done

echo; echo; echo

exit 0
</pre>
<p>The <strong>break</strong> command may optionally take a parameter. A plain
<strong>break</strong> terminates only the innermost loop in which it is
embedded, but a <strong>break N</strong> breaks out of <tt class="docutils literal">N</tt> levels of loop.</p>
<p><strong>Example 11-21. Breaking out of multiple loop levels</strong></p>
<pre class="literal-block">
#!/bin/bash
# break-levels.sh: Breaking out of loops.

# &quot;break N&quot; breaks out of N level loops.

for outerloop in 1 2 3 4 5
do
  echo -n &quot;Group $outerloop:   &quot;

  # --------------------------------------------------------
  for innerloop in 1 2 3 4 5
  do
    echo -n &quot;$innerloop &quot;

    if [ &quot;$innerloop&quot; -eq 3 ]
    then
      break  # Try   break 2   to see what happens.
             # (&quot;Breaks&quot; out of both inner and outer loops.)
    fi
  done
  # --------------------------------------------------------

  echo
done

echo

exit 0
</pre>
<p>The <strong>continue</strong> command, similar to <strong>break</strong>, optionally takes a
parameter. A plain <strong>continue</strong> cuts short the current iteration
within its loop and begins the next. A <strong>continue N</strong> terminates all
remaining iterations at its loop level and continues with the next
iteration at the loop, <tt class="docutils literal">N</tt> levels above.</p>
<p><strong>Example 11-22. Continuing at a higher loop level</strong></p>
<pre class="literal-block">
#!/bin/bash
# The &quot;continue N&quot; command, continuing at the Nth level loop.

for outer in I II III IV V           # outer loop
do
  echo; echo -n &quot;Group $outer: &quot;

  # --------------------------------------------------------------------
  for inner in 1 2 3 4 5 6 7 8 9 10  # inner loop
  do

    if [[ &quot;$inner&quot; -eq 7 &amp;&amp; &quot;$outer&quot; = &quot;III&quot; ]]
    then
      continue 2  # Continue at loop on 2nd level, that is &quot;outer loop&quot;.
                  # Replace above line with a simple &quot;continue&quot;
                  # to see normal loop behavior.
    fi

    echo -n &quot;$inner &quot;  # 7 8 9 10 will not echo on &quot;Group III.&quot;
  done
  # --------------------------------------------------------------------

done

echo; echo

# Exercise:
# Come up with a meaningful use for &quot;continue N&quot; in a script.

exit 0
</pre>
<p><strong>Example 11-23. Using *continue N* in an actual task</strong></p>
<pre class="literal-block">
# Albert Reiner gives an example of how to use &quot;continue N&quot;:
# ---------------------------------------------------------

#  Suppose I have a large number of jobs that need to be run, with
#+ any data that is to be treated in files of a given name pattern
#+ in a directory. There are several machines that access
#+ this directory, and I want to distribute the work over these
#+ different boxen.
#  Then I usually nohup something like the following on every box:

while true
do
  for n in .iso.*
  do
    [ &quot;$n&quot; = &quot;.iso.opts&quot; ] &amp;&amp; continue
    beta=${n#.iso.}
    [ -r .Iso.$beta ] &amp;&amp; continue
    [ -r .lock.$beta ] &amp;&amp; sleep 10 &amp;&amp; continue
    lockfile -r0 .lock.$beta || continue
    echo -n &quot;$beta: &quot; `date`
    run-isotherm $beta
    date
    ls -alF .Iso.$beta
    [ -r .Iso.$beta ] &amp;&amp; rm -f .lock.$beta
    continue 2
  done
  break
done

exit 0

#  The details, in particular the sleep N, are particular to my
#+ application, but the general pattern is:

while true
do
  for job in {pattern}
  do
    {job already done or running} &amp;&amp; continue
    {mark job as running, do job, mark job as done}
    continue 2
  done
  break        # Or something like `sleep 600' to avoid termination.
done

#  This way the script will stop only when there are no more jobs to do
#+ (including jobs that were added during runtime). Through the use
#+ of appropriate lockfiles it can be run on several machines
#+ concurrently without duplication of calculations [which run a couple
#+ of hours in my case, so I really want to avoid this]. Also, as search
#+ always starts again from the beginning, one can encode priorities in
#+ the file names. Of course, one could also do this without `continue 2',
#+ but then one would have to actually check whether or not some job
#+ was done (so that we should immediately look for the next job) or not
#+ (in which case we terminate or sleep for a long time before checking
#+ for a new job).
</pre>
<div class="figure align-center">
<img alt="Caution" src="http://tldp.org/LDP/abs/images/caution.gif" />
<p class="caption">Caution</p>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/loopcontrol.ca.rst</tt>, line 229)</p>
Explicit markup ends without a blank line; unexpected unindent.</div>
<p class="last">The <strong>continue N</strong> construct is difficult to understand and tricky
to use in any meaningful context. It is probably best avoided.</p>
</dd>
</dl>
<div class="section" id="notes">
<h2>Notes</h2>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">rst-ca/loopcontrol.ca.rst</tt>, line 10); <em><a href="#id4">backlink</a></em></p>
Duplicate explicit target name: &quot;[1]&quot;.</div>
<p><a class="reference external" href="loopcontrol.html#AEN6927">[1]</a></p>
<p>These are shell <a class="reference external" href="internal.html#BUILTINREF">builtins</a>, whereas other
loop commands, such as <a class="reference external" href="loops1.html#WHILELOOPREF">while</a> and
<a class="reference external" href="testbranch.html#CASEESAC1">case</a>, are
<a class="reference external" href="internal.html#KEYWORDREF">keywords</a>.</p>
<hr class="docutils" />
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="29%" />
<col width="35%" />
</colgroup>
<tbody valign="top">
<tr><td><a class="reference external" href="nestedloops.html">Prev</a></td>
<td><a class="reference external" href="index.html">Home</a></td>
<td><a class="reference external" href="testbranch.html">Next</a></td>
</tr>
<tr><td>Nested Loops</td>
<td><a class="reference external" href="loops.html">Up</a></td>
<td>Testing and Branching</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>
