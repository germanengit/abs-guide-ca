<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
 <head>
  <title>
   History Commands
  </title>
  <meta content="Modular DocBook HTML Stylesheet Version 1.7" name="GENERATOR"/>
  <link href="index.html" rel="HOME" title="Advanced Bash-Scripting Guide"/>
  <link href="localization.html" rel="PREVIOUS" title="Localization"/>
  <link href="sample-bashrc.html" rel="NEXT" title="Sample .bashrc  and
	    .bash_profile Files"/>
 </head>
 <body alink="#0000FF" bgcolor="#FFFFFF" class="APPENDIX" link="#0000FF" text="#000000" vlink="#840084">
  <div class="APPENDIX">
   <h1>
    <a name="HISTCOMMANDS">
    </a>
    Appendix L. History Commands
   </h1>
   <p>
    The Bash shell provides command-line tools for editing and
       manipulating a user's
    <i class="FIRSTTERM">
     command history
    </i>
    . This
       is primarily a convenience, a means of saving keystrokes.
   </p>
   <p>
    Bash history commands:
   </p>
   <p>
   </p>
   <ol type="1">
    <li>
     <p>
      <b class="COMMAND">
       history
      </b>
     </p>
    </li>
    <li>
     <p>
      <b class="COMMAND">
       fc
      </b>
     </p>
    </li>
   </ol>
   <p>
   </p>
   <div>
    <p>
     <font color="#000000">
      <pre class="SCREEN"><tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>history</b></tt>
<tt class="COMPUTEROUTPUT">   1  mount /mnt/cdrom
    2  cd /mnt/cdrom
    3  ls
     ...</tt>
	      </pre>
     </font>
    </p>
   </div>
   <p>
    Internal variables associated with Bash history commands:
   </p>
   <p>
   </p>
   <ol type="1">
    <li>
     <p>
      $HISTCMD
     </p>
    </li>
    <li>
     <p>
      $HISTCONTROL
     </p>
    </li>
    <li>
     <p>
      $HISTIGNORE
     </p>
    </li>
    <li>
     <p>
      $HISTFILE
     </p>
    </li>
    <li>
     <p>
      $HISTFILESIZE
     </p>
    </li>
    <li>
     <p>
      $HISTSIZE
     </p>
    </li>
    <li>
     <p>
      $HISTTIMEFORMAT (Bash, ver. 3.0 or later)
     </p>
    </li>
    <li>
     <p>
      !!
     </p>
    </li>
    <li>
     <p>
      !$
     </p>
    </li>
    <li>
     <p>
      !#
     </p>
    </li>
    <li>
     <p>
      !N
     </p>
    </li>
    <li>
     <p>
      !-N
     </p>
    </li>
    <li>
     <p>
      !STRING
     </p>
    </li>
    <li>
     <p>
      !?STRING?
     </p>
    </li>
    <li>
     <p>
      ^STRING^string^
     </p>
    </li>
   </ol>
   <p>
    Unfortunately, the Bash history tools find no use in
       scripting.
   </p>
   <p>
   </p>
   <div>
    <p>
     <font color="#000000">
      <pre class="PROGRAMLISTING">#!/bin/bash
# history.sh
# A (vain) attempt to use the 'history' command in a script.

history                      # No output.

var=$(history); echo "$var"  # $var is empty.

#  History commands are, by default, disabled within a script.
#  However, as dhw points out,
#+ set -o history
#+ enables the history mechanism.

set -o history
var=$(history); echo "$var"   # 1  var=$(history)</pre>
     </font>
    </p>
   </div>
   <p>
   </p>
   <div>
    <p>
     <font color="#000000">
      <pre class="SCREEN"><tt class="PROMPT">bash$ </tt><tt class="USERINPUT"><b>./history.sh</b></tt>
<tt class="COMPUTEROUTPUT">(no output)</tt>	      
	      </pre>
     </font>
    </p>
   </div>
   <p>
    The
    <a href="http://samrowe.com/wordpress/advancing-in-the-bash-shell/" target="_top">
     Advancing
	    in the Bash Shell
    </a>
    site gives a good introduction to
	    the use of history commands in Bash.
   </p>
  </div>
 </body>
</html>